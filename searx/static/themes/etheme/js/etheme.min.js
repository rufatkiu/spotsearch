function build_video(a){var b,c="";for(b=0;b<a.length;b++)c+="      <div class='result result-videos'>        <div class='result-content'>          <a class='thumbnail' href='"+a[b].url+"' rel='noreferrer'>            <img src='"+a[b].thumbnail+"' alt=\""+a[b].title+"\">          </a>          <div>            <h4 class='result_header'>              <a href='"+a[b].url+"' rel='noreferrer'>"+a[b].title+"</a>            </h4>          </div>        </div>      </div>";return c}function build_image(a){var b,c="";for(b=0;b<a.length;b++)void 0!==a[b].thumbnail_src&&(c+="      <div class='result result-images'>        <a href="+a[b].img_src+"' data-url='"+a[b].url+"' class='img-thumb-link'>          <img src='"+a[b].thumbnail_src+"' alt=\""+a[b].title+'" title="'+a[b].title+"\" class='img-thumbnail'>        </a>      </div>");return c}function setUpDarkModetoggle(){var a=$("html").hasClass("dark-mode"),b=$(".nav_dark-mode input");b.attr("checked",a),b.change(function(){setEThemeStyle(this.checked)})}function setEThemeStyle(a){$("html").toggleClass("dark-mode",a);var b=a?"dark":"light",c={method:"PATCH"};fetch("/preferences/etheme-style/"+b,c).then(function(a){document.getElementById("logo_inline").src="/static/themes/etheme/img/logo-"+b+"@2x.svg",document.getElementById("logo_block").src="/static/themes/etheme/img/logo-"+b+"@2x.svg"}).catch(function(a){console.log("Error while setting etheme style",a)})}function setUpSelectors(){$("select:not([data-hide-search])").select2(),$("select[data-hide-search]").select2({minimumResultsForSearch:1/0})}$(document).ready(function(){function a(a,b){document.getElementById("image_view_image").src=b,document.getElementById("image_view_file_link").href=a.href,document.getElementById("image_view_url_link").href=a.dataset.url}if($("#main_results").on("click",".result.result-images",function(b){b.preventDefault();var c=b.target,d=c.src;"IMG"==c.tagName&&(c=c.parentElement);var e=document.getElementById("image_view_modal");e.classList.remove("hidden"),e.style.top=window.scrollY+"px",a(c,d),document.body.classList.add("lock")}),$("#close_image_view_modal").click(function(){document.getElementById("image_view_modal").classList.add("hidden"),document.getElementById("image_view_image").src="",document.getElementById("image_view_file_link").href="#",document.getElementById("image_view_url_link").href="#",document.body.classList.remove("lock")}),$("#main_results").has(".first-page-media-results").length){var b={headers:{"Content-Type":"application/json"}},c=$.param({format:"json",q:$("#q").attr("value"),language:$("select[name='language']").find("option:selected").attr("value"),time_range:$("select[name='time_range']").find("option:selected").attr("value")});fetch(window.location.origin+"/search?categories=images&"+c,{headers:b}).then(function(a){return a.json()}).then(function(a){a.results&&$("#default_images_container").append(build_image(a.results.slice(0,5)))}),fetch(window.location.origin+"/search?categories=videos&"+c,{headers:b}).then(function(a){return a.json()}).then(function(a){a.results&&$(".videos-gallery").append(build_video(a.results.slice(0,2)))})}setUpDarkModetoggle(),setUpSelectors()});